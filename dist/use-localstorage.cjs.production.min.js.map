{"version":3,"file":"use-localstorage.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["import { useState, useEffect, Dispatch } from 'react'\n\nexport default function useLocalStorage<T>(\n  key: string,\n  initialValue: T | Function,\n): [T | undefined, Dispatch<T>] {\n  const [storedValue, setStoredValue] = useState()\n\n  const handleItemUpdate = (event: StorageEvent) => {\n    if (key !== event.key) return\n\n    const item = window.localStorage.getItem(key)\n\n    setStoredValue(item ? JSON.parse(item) : initialItem())\n  }\n\n  const initialItem = () => (initialValue instanceof Function ? initialValue() : initialValue)\n\n  useEffect(() => {\n    window.addEventListener('storage', handleItemUpdate)\n\n    const item = window.localStorage.getItem(key)\n\n    setStoredValue(item ? JSON.parse(item) : initialItem())\n\n    return () => window.removeEventListener('storage', handleItemUpdate)\n  }, [])\n\n  const setValue = (newValue: any) => {\n    const valueToStore = newValue instanceof Function ? newValue() : newValue\n\n    storeItem(valueToStore)\n    setStoredValue(valueToStore)\n  }\n\n  const storeItem = (item: any) => {\n    window.localStorage.setItem(key, JSON.stringify(item))\n\n    const event = new StorageEvent('storage', { key: key })\n    window.dispatchEvent(event)\n  }\n\n  return [storedValue, setValue]\n}\n"],"names":["key","initialValue","useState","storedValue","setStoredValue","handleItemUpdate","event","item","window","localStorage","getItem","JSON","parse","initialItem","Function","useEffect","addEventListener","removeEventListener","newValue","valueToStore","setItem","stringify","StorageEvent","dispatchEvent","storeItem"],"mappings":"oHAGEA,EACAC,SAEsCC,aAA/BC,OAAaC,OAEdC,EAAmB,SAACC,MACpBN,IAAQM,EAAMN,SAEZO,EAAOC,OAAOC,aAAaC,QAAQV,GAEzCI,EAAeG,EAAOI,KAAKC,MAAML,GAAQM,OAGrCA,EAAc,kBAAOZ,aAAwBa,SAAWb,IAAiBA,UAE/Ec,aAAU,WACRP,OAAOQ,iBAAiB,UAAWX,OAE7BE,EAAOC,OAAOC,aAAaC,QAAQV,UAEzCI,EAAeG,EAAOI,KAAKC,MAAML,GAAQM,KAElC,kBAAML,OAAOS,oBAAoB,UAAWZ,MAClD,IAgBI,CAACF,EAdS,SAACe,OACVC,EAAeD,aAAoBJ,SAAWI,IAAaA,GAMjD,SAACX,GACjBC,OAAOC,aAAaW,QAAQpB,EAAKW,KAAKU,UAAUd,QAE1CD,EAAQ,IAAIgB,aAAa,UAAW,CAAEtB,IAAKA,IACjDQ,OAAOe,cAAcjB,IARrBkB,CAAUL,GACVf,EAAee"}