{"version":3,"file":"use-localstorage.cjs.development.js","sources":["../src/index.ts"],"sourcesContent":["import { useState, useEffect, Dispatch } from 'react'\n\nexport default function useLocalStorage<T>(\n  key: string,\n  initialValue: T | Function,\n): [T | undefined, Dispatch<T>] {\n  const [storedValue, setStoredValue] = useState()\n\n  const handleItemUpdate = (event: StorageEvent) => {\n    if (key !== event.key) return\n\n    const item = window.localStorage.getItem(key)\n\n    setStoredValue(item ? JSON.parse(item) : initialItem())\n  }\n\n  const initialItem = () => (initialValue instanceof Function ? initialValue() : initialValue)\n\n  useEffect(() => {\n    window.addEventListener('storage', handleItemUpdate)\n\n    const item = window.localStorage.getItem(key)\n\n    setStoredValue(item ? JSON.parse(item) : initialItem())\n\n    return () => window.removeEventListener('storage', handleItemUpdate)\n  }, [])\n\n  const setValue = (newValue: any) => {\n    const valueToStore = newValue instanceof Function ? newValue() : newValue\n\n    storeItem(valueToStore)\n    setStoredValue(valueToStore)\n  }\n\n  const storeItem = (item: any) => {\n    window.localStorage.setItem(key, JSON.stringify(item))\n\n    const event = new StorageEvent('storage', { key: key })\n    window.dispatchEvent(event)\n  }\n\n  return [storedValue, setValue]\n}\n"],"names":["useLocalStorage","key","initialValue","useState","storedValue","setStoredValue","handleItemUpdate","event","item","window","localStorage","getItem","JSON","parse","initialItem","Function","useEffect","addEventListener","removeEventListener","setValue","newValue","valueToStore","storeItem","setItem","stringify","StorageEvent","dispatchEvent"],"mappings":";;;;;;SAEwBA,gBACtBC,KACAC;kBAEsCC,cAAQ;MAAvCC;MAAaC;;AAEpB,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD;AACvB,QAAIN,GAAG,KAAKM,KAAK,CAACN,GAAlB,EAAuB;AAEvB,QAAMO,IAAI,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BV,GAA5B,CAAb;AAEAI,IAAAA,cAAc,CAACG,IAAI,GAAGI,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAH,GAAsBM,WAAW,EAAtC,CAAd;AACD,GAND;;AAQA,MAAMA,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAOZ,YAAY,YAAYa,QAAxB,GAAmCb,YAAY,EAA/C,GAAoDA,YAA3D;AAAA,GAApB;;AAEAc,EAAAA,eAAS,CAAC;AACRP,IAAAA,MAAM,CAACQ,gBAAP,CAAwB,SAAxB,EAAmCX,gBAAnC;AAEA,QAAME,IAAI,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BV,GAA5B,CAAb;AAEAI,IAAAA,cAAc,CAACG,IAAI,GAAGI,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAH,GAAsBM,WAAW,EAAtC,CAAd;AAEA,WAAO;AAAA,aAAML,MAAM,CAACS,mBAAP,CAA2B,SAA3B,EAAsCZ,gBAAtC,CAAN;AAAA,KAAP;AACD,GARQ,EAQN,EARM,CAAT;;AAUA,MAAMa,QAAQ,GAAG,SAAXA,QAAW,CAACC,QAAD;AACf,QAAMC,YAAY,GAAGD,QAAQ,YAAYL,QAApB,GAA+BK,QAAQ,EAAvC,GAA4CA,QAAjE;AAEAE,IAAAA,SAAS,CAACD,YAAD,CAAT;AACAhB,IAAAA,cAAc,CAACgB,YAAD,CAAd;AACD,GALD;;AAOA,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAACd,IAAD;AAChBC,IAAAA,MAAM,CAACC,YAAP,CAAoBa,OAApB,CAA4BtB,GAA5B,EAAiCW,IAAI,CAACY,SAAL,CAAehB,IAAf,CAAjC;AAEA,QAAMD,KAAK,GAAG,IAAIkB,YAAJ,CAAiB,SAAjB,EAA4B;AAAExB,MAAAA,GAAG,EAAEA;AAAP,KAA5B,CAAd;AACAQ,IAAAA,MAAM,CAACiB,aAAP,CAAqBnB,KAArB;AACD,GALD;;AAOA,SAAO,CAACH,WAAD,EAAce,QAAd,CAAP;AACD;;;;"}